---
organiser: "Royfactory"

---
{% assign organiser = site.data.organisers[page.organiser] %}

<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>{{ page.title }}</title>
	<meta name="description" content="" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<link href="http://fonts.googleapis.com/css?family=Droid+Serif:400,400italic,700,700italic%7CMontserrat:400,700" rel="stylesheet" type="text/css" />
	<link rel="stylesheet" type="text/css" href="/assets/css/style-v=cba79c2df0.css" />
	<link rel="shortcut icon" href="/img/favicon.ico">
	<link rel="icon" href="/img/favicon.ico" type="image/x-icon">



	<!--[if lt IE 9]>
	<script src="../../assets/js/html5-v=cba79c2df0.js"></script>
	<![endif]-->


<style>

@media only screen and (min-width: 1400px){
.grid-item, .home-template .grid-item:nth-child(3n+1), .cover.page-header-1 {
    height: 500px;
    height: 450px;
    width: 100%;
}
}
</style>
</head>
<body class="home-template">
	<div id="page" class="site">
    {% include header.html %}
    <main class="site-main" role="main">
	    <section class="site-content">
        <article class="post tag-music tag-science" itemscope itemtype="http://schema.org/BlogPosting">            
            <header class="cover page-header-1">
                <div class="cover-bg" style="background-image: url('/img/blur-background-1680x1050-spectrum-electromagnetic-4k-901-1.jpg?id=1080')"></div>
                <div class="cover-content">
                    <div class="inner">
                        <h1 class="post-title">{{ page.title }}</h1>
                        <div class="post-meta">
                            by {{ site.author }}<span class="post-author"><a href="{{ site.baseurl }}/about" itemscope itemtype="http://schema.org/Person">  {{organiser.name}}</a></span><time class="published"   ></time> <span class="reading-time"> <span class="eta"></span></span>
                        </div><!-- .post-meta -->
                    </div><!-- .inner -->
                </div><!-- .cover-content -->
            </header><!-- .cover -->
            <div class="post-content inner">
                <section id="archive">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                                <div class="site-heading">
                                    <!--  <span class="subheading" id="textfloat">{{ page.description }}</span> -->
                                    <h2>전체 포스트 아카이브</h2>
                                                     {% assign posts_per_page = 20 %}
                    {% assign total_posts = site.posts | size %}
                    {% assign total_pages = total_posts | divided_by: posts_per_page %}
                    {% assign remainder = total_posts | modulo: posts_per_page %}
                    {% if remainder > 0 %}
                        {% assign total_pages = total_pages | plus: 1 %}
                    {% endif %}
                                    
                                    <!-- 페이지 정보 (JavaScript로 동적 업데이트) -->
                                    <div class="page-info">
                                        <p>총 {{ total_posts }}개의 포스트 | <span id="current-page-info">1</span> / {{ total_pages }} 페이지</p>
                                    </div>
                                    
                                    <!-- 모든 포스트를 출력 (JavaScript로 숨김/표시 제어) -->
                                    {% assign year_group = "" %}
                                    {% for post in site.posts %}
                                        {% capture post_year %}{{ post.date | date: "%Y" }}{% endcapture %}
                                        {% if post_year != year_group %}
                                            {% unless forloop.first %}</ul>{% endunless %}
                                            <h3>{{ post_year }}년</h3>
                                            <ul class="post-year-{{ post_year }}">
                                            {% assign year_group = post_year %}
                                        {% endif %}
                                        <li class="post-item" data-index="{{ forloop.index0 }}">
                                            <a href="{{ post.url }}" data-datatype="json" data-type="GET" data-target="#frame" class="reload" id="clickme">{{ post.title }}</a> 
                                            <time>{{ post.date | date:"%Y-%m-%d" }}</time>
                                            <span class="post-category">[{{ post.categories | first | capitalize }}]</span>
                                        </li>
                                        {% if forloop.last %}</ul>{% endif %}
                                    {% endfor %}
                                    
                                    <!-- 페이징 네비게이션 -->
                                    <div class="pagination-wrapper">
                                        <nav class="pagination" role="navigation" id="pagination-nav">
                                            <!-- JavaScript로 동적 생성 -->
                                        </nav>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div><!-- .post-content -->
            <footer class="post-footer inner">
                <!--
                <div class="share-post">
                    <span>Share</span>
                    <a class="icon-twitter square" target="_blank" href="http://twitter.com/share?text={{ post.url | prepend: site.baseurl }}&url="><span class="screen-reader-text">Twitter</span></a>
                    <a class="icon-facebook square" target="_blank" href="http://wwww.facebook.com/sharer.php?"><span class="screen-reader-text">Facebook</span></a>
                    <a class="icon-google square" target="_blank" href="http://plus.google.com/share?url=/"><span class="screen-reader-text">Google+</span></a>
                </div>
                -->
                <div class="author-box">
                  {% if organiser.photo %}
                    <img src="{{organiser.photo}}" alt="Jane Doe" class="author-avatar" />
                  {% endif %}
                    {% if organiser.photo %}
                    <h4 class="author-title">About <a href="">By {{organiser.name}}</a></h4>
                     {% endif %}
                    <p class="author-description">{{ site.description }}</p>
                    <p class="author-links">
                    <span class="author-location"><i class="icon-map-marker" aria-hidden="true"></i> {{organiser.country}}</span>
                    <span class="author-website"><i class="icon-chain" aria-hidden="true"></i> <a href="https://blog.royfactory.net" target="_blank">{{ organiser.web }}</a>
                    </span> 
                    <span class="author-website"><i class="icon-chain" aria-hidden="true"></i> <a href="https://blog.royfactory.net" target="_blank">{{ organiser.email }}</a>
                    </span>   
                    </p>
                </div>                  
            </footer><!-- .post-footer -->
        </article><!-- .post -->
        </section>
        </main>
                    {% include footer.html %}

        </div>

<script>
// 전역 변수 (Jekyll 변수를 안전하게 JavaScript로 전달)
const POSTS_PER_PAGE = 20;
const TOTAL_POSTS = parseInt('{{ site.posts | size }}') || 0;
const TOTAL_PAGES = Math.max(1, Math.ceil(TOTAL_POSTS / POSTS_PER_PAGE));

console.log('총 포스트 수:', TOTAL_POSTS, '총 페이지 수:', TOTAL_PAGES);

// URL에서 페이지 파라미터 읽기
function getPageFromUrl() {
    const urlParams = new URLSearchParams(window.location.search);
    const page = parseInt(urlParams.get('page')) || 1;
    return Math.max(1, Math.min(page, TOTAL_PAGES)); // 1과 TOTAL_PAGES 사이로 제한
}

// 페이지 로드 시 실행
document.addEventListener('DOMContentLoaded', function() {
    // TOTAL_POSTS가 0이면 에러 방지
    if (TOTAL_POSTS === 0) {
        console.warn('포스트가 없습니다.');
        return;
    }
    
    const currentPage = getPageFromUrl();
    console.log('현재 페이지:', currentPage, '총 페이지:', TOTAL_PAGES);
    
    // 페이지 정보 업데이트
    updatePageInfo(currentPage);
    
    // 현재 페이지에 맞는 포스트들만 표시
    showPostsForPage(currentPage);
    
    // 페이징 버튼 생성
    createPaginationButtons(currentPage);
});

function updatePageInfo(currentPage) {
    const pageInfoElement = document.getElementById('current-page-info');
    if (pageInfoElement) {
        pageInfoElement.textContent = currentPage;
    }
}

function showPostsForPage(page) {
    const allPosts = document.querySelectorAll('.post-item');
    
    if (allPosts.length === 0) {
        console.warn('포스트 아이템을 찾을 수 없습니다.');
        return;
    }
    
    const startIndex = (page - 1) * POSTS_PER_PAGE;
    const endIndex = startIndex + POSTS_PER_PAGE;
    
    console.log(`페이지 ${page}: ${startIndex} ~ ${endIndex-1} 포스트 표시 (총 ${allPosts.length}개)`);
    
    // 모든 연도 헤더 숨기기
    const yearHeaders = document.querySelectorAll('section#archive h3');
    yearHeaders.forEach(header => {
        header.style.display = 'none';
    });
    
    // 현재 페이지에 표시될 연도들을 추적
    const visibleYears = new Set();
    
    // 모든 포스트 처리
    allPosts.forEach((post, index) => {
        if (index >= startIndex && index < endIndex) {
            post.style.display = 'flex';
            
            // 해당 포스트의 연도 헤더 찾기 및 표시
            const ul = post.closest('ul');
            if (ul) {
                const yearHeader = ul.previousElementSibling;
                if (yearHeader && yearHeader.tagName === 'H3') {
                    const year = yearHeader.textContent.trim();
                    if (!visibleYears.has(year)) {
                        yearHeader.style.display = 'block';
                        visibleYears.add(year);
                    }
                }
            }
        } else {
            post.style.display = 'none';
        }
    });
    
    console.log('표시된 연도:', Array.from(visibleYears));
}

function createPaginationButtons(currentPage) {
    const paginationNav = document.getElementById('pagination-nav');
    
    if (!paginationNav) {
        console.warn('페이징 네비게이션 요소를 찾을 수 없습니다.');
        return;
    }
    
    if (TOTAL_PAGES <= 1) {
        paginationNav.innerHTML = '';
        return;
    }
    
    let html = '';
    
    // 이전 버튼
    if (currentPage > 1) {
        html += `<a href="?page=${currentPage - 1}" class="prev-page">« 이전</a>`;
    }
    
    html += '<div class="page-numbers">';
    
    // 페이지 번호 계산
    let startPage = Math.max(1, currentPage - 2);
    let endPage = Math.min(TOTAL_PAGES, startPage + 4);
    
    if (endPage - startPage < 4) {
        startPage = Math.max(1, endPage - 4);
    }
    
    // 첫 페이지 링크
    if (startPage > 1) {
        html += '<a href="?page=1" class="page-number">1</a>';
        if (startPage > 2) {
            html += '<span class="page-dots">...</span>';
        }
    }
    
    // 페이지 번호 링크
    for (let i = startPage; i <= endPage; i++) {
        if (i === currentPage) {
            html += `<span class="page-number current">${i}</span>`;
        } else {
            html += `<a href="?page=${i}" class="page-number">${i}</a>`;
        }
    }
    
    // 마지막 페이지 링크
    if (endPage < TOTAL_PAGES) {
        if (endPage < TOTAL_PAGES - 1) {
            html += '<span class="page-dots">...</span>';
        }
        html += `<a href="?page=${TOTAL_PAGES}" class="page-number">${TOTAL_PAGES}</a>`;
    }
    
    html += '</div>';
    
    // 다음 버튼
    if (currentPage < TOTAL_PAGES) {
        html += `<a href="?page=${currentPage + 1}" class="next-page">다음 »</a>`;
    }
    
    paginationNav.innerHTML = html;
    
    // 페이지 변경 시 부드러운 스크롤
    const pageLinks = paginationNav.querySelectorAll('a');
    pageLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            setTimeout(() => {
                const archiveSection = document.querySelector('section#archive');
                if (archiveSection) {
                    archiveSection.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            }, 100);
        });
    });
}

// URL 변경 감지 (뒤로가기/앞으로가기 버튼 대응)
window.addEventListener('popstate', function() {
    if (TOTAL_POSTS === 0) return;
    
    const currentPage = getPageFromUrl();
    console.log('페이지 변경됨:', currentPage);
    
    updatePageInfo(currentPage);
    showPostsForPage(currentPage);
    createPaginationButtons(currentPage);
});
</script>

</body>
</html>
<style>
section#archive { padding: 100px 0; }
section#archive .site-heading li { display:flex;border-radius:5px;padding:2px 10px; }
section#archive .site-heading li:hover { background-color:#fffac4; }
section#archive .site-heading li + li { margin-top: 5px;border-top:1px solid #f1f2f3; }
section#archive .site-heading li a { flex:1;font-weight:bold; }
section#archive .site-heading li time { font-size:0.8em; }

/* 페이징 스타일 */
.page-info {
    text-align: center;
    margin-bottom: 30px;
    padding: 10px;
    background: #f8f9fa;
    border-radius: 5px;
}

.page-info p {
    margin: 0;
    color: #666;
}

.post-category {
    font-size: 0.75em;
    color: #888;
    margin-left: 10px;
}

.pagination-wrapper {
    margin-top: 50px;
    text-align: center;
}

.pagination {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 20px 0;
}

.prev-page,
.next-page {
    padding: 8px 16px;
    background: #007bff;
    color: white;
    text-decoration: none;
    border-radius: 4px;
    font-weight: 500;
    transition: background 0.3s ease;
}

.prev-page:hover,
.next-page:hover {
    background: #0056b3;
    color: white;
}

.page-numbers {
    display: flex;
    align-items: center;
    gap: 5px;
}

.page-number {
    padding: 8px 12px;
    text-decoration: none;
    color: #007bff;
    border: 1px solid #dee2e6;
    border-radius: 4px;
    transition: all 0.3s ease;
}

.page-number:hover {
    background: #e9ecef;
    color: #0056b3;
}

.page-number.current {
    background: #007bff;
    color: white;
    border-color: #007bff;
    font-weight: bold;
}

.page-dots {
    padding: 8px 4px;
    color: #6c757d;
}

/* 반응형 디자인 */
@media (max-width: 768px) {
    .pagination {
        flex-wrap: wrap;
        gap: 5px;
    }
    
    .page-numbers {
        flex-wrap: wrap;
        gap: 3px;
    }
    
    .prev-page,
    .next-page,
    .page-number {
        padding: 6px 10px;
        font-size: 0.9em;
    }
}
</style>
